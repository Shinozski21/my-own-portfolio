<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block page_title %}SHINnovation Portfolio{% endblock %}</title>

    <!-- Keep Bootstrap for the rest of your site -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/site.css') }}"
    />
    {% block extra_head %}{% endblock %}
  </head>

  <body>
    <!-- CUSTOM NAVBAR -->
    <header class="custom-nav" role="banner">
      <div class="nav-container">
        <a href="/" class="logo">
          <img
            src="/static/images/shin-kanji.gif"
            height="32"
            width="40"
            alt="Shinnovation logo"
          />
          <span>SHINnovation</span>
        </a>

        <button
          class="nav-toggle"
          type="button"
          aria-expanded="false"
          aria-controls="primary-navigation"
        >
          <span class="nav-toggle-bar"></span>
          <span class="nav-toggle-bar"></span>
          <span class="nav-toggle-bar"></span>
          <span class="visually-hidden">Toggle navigation</span>
        </button>

        <nav class="nav-links" id="primary-navigation" data-state="closed">
          <a
            href="{{ url_for('home') }}"
            class="{% if request.path == url_for('home') %}active{% endif %}"
          >
            Home
          </a>

          <a
            href="{{ url_for('about') }}"
            class="{% if request.path == url_for('about') %}active{% endif %}"
          >
            About
          </a>

          <a
            href="{{ url_for('resume') }}"
            class="{% if request.path == url_for('resume') %}active{% endif %}"
          >
            Resume
          </a>

          <a
            href="{{ url_for('certifications') }}"
            class="{% if request.path == url_for('certifications') %}active{% endif %}"
          >
            Certifications
          </a>

          <a
            href="{{ url_for('portfolio') }}"
            class="{% if request.path == url_for('portfolio') %}active{% endif %}"
          >
            Portfolio
          </a>

          <a
            href="{{ url_for('blog') }}"
            class="{% if request.path == url_for('blog') %}active{% endif %}"
          >
            Blog
          </a>

          <a
            href="{{ url_for('contact') }}"
            class="{% if request.path == url_for('contact') %}active{% endif %}"
          >
            Contact
          </a>
        </nav>
      </div>
    </header>

    <!-- PAGE CONTENT -->
    <main class="page-wrapper" id="main-content">
      {% block content %}{% endblock %}
    </main>

    <!-- FOOTER (Bootstrap is used here) -->
    <footer class="py-3 my-4">
      <ul class="nav justify-content-center border-bottom pb-3 mb-3">
        <li class="nav-item">
          <a
            href="{{url_for('home')}}"
            class="nav-link px-2 text-body-secondary"
            >Home</a
          >
        </li>
        <li class="nav-item">
          <a
            href="{{url_for('about')}}"
            class="nav-link px-2 text-body-secondary"
            >About</a
          >
        </li>
        <li class="nav-item">
          <a
            href="{{url_for('resume')}}"
            class="nav-link px-2 text-body-secondary"
            >Resume</a
          >
        </li>
        <li class="nav-item">
          <a
            href="{{url_for('portfolio')}}"
            class="nav-link px-2 text-body-secondary"
            >Portfolio</a
          >
        </li>
        <li class="nav-item">
          <a
            href="{{url_for('blog')}}"
            class="nav-link px-2 text-body-secondary"
            >Blog</a
          >
        </li>
        <li class="nav-item">
          <a
            href="{{url_for('contact')}}"
            class="nav-link px-2 text-body-secondary"
            >Contact</a
          >
        </li>
      </ul>

      <p class="text-center text-body-secondary">&#169; 2023 Shin Orbeta</p>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>

    <script>
      (() => {
        const navToggle = document.querySelector(".nav-toggle");
        const navLinks = document.getElementById("primary-navigation");

        if (!navToggle || !navLinks) {
          return;
        }

        const setState = (isOpen) => {
          navToggle.setAttribute("aria-expanded", String(isOpen));
          navLinks.dataset.state = isOpen ? "open" : "closed";
        };

        navToggle.addEventListener("click", () => {
          const isExpanded = navToggle.getAttribute("aria-expanded") === "true";
          setState(!isExpanded);
        });

        const syncForViewport = () => {
          if (window.innerWidth > 900) {
            setState(true);
          } else {
            setState(false);
          }
        };

        syncForViewport();
        window.addEventListener("resize", syncForViewport);
      })();
    </script>
  </body>
</html>
